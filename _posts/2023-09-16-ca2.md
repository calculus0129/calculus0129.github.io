---
title: \[CA2\] Instructions; Language of the computer
header: header
toc: true
toc_sticky: true
toc_label: "Contents"
excerpt: Instructions
date: 2023-09-16
categories:
    - computerarchitecture
tags:
  - languages:Korean
  - languages:English
---

<style>
    a.links {
        font-size: 4px;
    }
    span.cf {
        background-color: #fef;
    }
    span.imp {
        color: #f00;
        font-style: bold;
    }
    span.highlight {
        background-color: #ff0;
    }
</style>

### 2.1. Introduction

컴퓨터 하드웨어에 명령을 내리기 위해, 우리는 하드웨어의 언어를 할 줄 알아야 한다.

instruction: Words of a computer's language.<br>
<a id="r1" class="links" href="#w1" title="instruction set: The vocabulary of commands understood by a given architecture">[1]</a><u>instruction set</u>: Vocabulary of computer.

instruction set Example:<br>
RISC: Reduced Instruction Set Computer (contrasting concept: CISC)

e.g. MIPS, ARM, Power PC, etc.

Computer "Architecture" defines...
- Instruction Set Architecture
  - Instruction Set
  - Operand types
  - Data Types (integers, FPs, ...)
  - Memory addressing modes, ...
- Registers and other state
- The interrupt/exception model
- Memory management and protection
- Virtual and physical address layout
- IO model

Chapter Goal<br>
: Know how to represent instructions.

Overview<br>
1. Learn how to represent instructions.
2. Discover the <a id="r2" class="links" href="#w2" title="stored-program concept: The idea that instructions and data of many types can be stored in memory as numbers, leading to the stored program computer.">[2]</a><u>stored-program concept</u>
3. Exercise the "forieign language" skills by writing Assembly programs & running them on the simulator that comes with this book.
4. See the impact of programming languages and compiler optimization on prformance.
5. Historical evolution of instruction sets.

### 2.2. Operations of the Computer Hardware

<span class="cf">The MIPS instruction set</span>
 - Used as the example throughout the book.
 - Stanford MIPS commercializd by MIPS technologies <www.mips.com>
 - Typical of many modern ISAs.
 - Similar ISAs have a large share of embedded core market.
   - Applications in consumer eletronics, network/storage equipment, cameras, printers, ...
   - Almost 100 million MIPS processors manufactured in 2002.

<p align="center"> [ Register name, Number, Use, Call Convention ] </p>

| Name | Number | Use | Preserved Across a Call? |
| --- | --- | --- | --- |
| $zero | 0 | The constant value 0 | n.a. |
| $at | 1 | Assembler Temporary | No |
| $v0-$v1 | 2-3 | Values for function Results and Expression Evaluation | No |
| $a0-$a3 | 4-7 | Arguments | No |
| $t0-$t7 | 8-15 | Temporaries | No |
| $s0-$s7 | 16-23 | Saved Temporaries | Yes |
| $t8-$t9 | 24-25 | Temporaries | No |
| $k0-$k1 | 26-27 | Reserved for OS Kernel | No |
| $gp | 28 | Global Pointer | Yes |
| $sp | 29 | Stack Pointer | Yes |
| $fp | 30 | Frame Pointer | Yes |
| $ra | 31 | Return Address | Yes |

<p align="center"> [ MIPS instructions ] </p>

| Category | Instruction | Example | Meaning | Comments |
| --- | --- | --- | --- | --- |
| Arithmetic | add | add $s1,$s2,$s3 | $s1 = $s2 + $s3 | Three register operands |
| Arithmetic | subtract | sub $s1,$s2,$s3 | $s1 = $s2 - $s3 | Three register operands |
| Arithmetic | add immediate | addi $s1,$s2,20 | $s1 = $s2 + 20 | Used to add constants |
| Data transfer | load word | lw $s1,20($s2) | $s1 = Memory\[$s2+20\] | Word from memory to register |
| Data transfer | store word | sw $s1,20($s2) | Memory\[$s2+20\] = $s1 | Word from register to memory |
| Data transfer | load half | lh $s1,20($s2) | $s1 = Memory\[$s2+20\] | Halfword memory to register |
| Data transfer | load half unsigned | lhu $s1,20($s2) | $s1 = Memory\[$s2+20\] | Halfword memory to register |
| Data transfer | store half | sh $s1,20($s2) | Memory\[$s2+20\] = $s1 | Halfword register to memory |

<span class="highlight">Fixation of operand #s in arithmetic operators (as 3)</span> demonstrates regularity.

This illustrates first of the three underlying principles of hardware design:

# HW Design Principle 1

| Design Principle 1: Simplicity favors regularity. |

(form of arithmetic operations)
- Regularity makes implementation simpler
- Simplicity => high perf / low cost


Example: Changing the below C code into Assembly.
```c
f = (g + h) - (i + j);
```

Compiled MIPS code (Assembly)
- $s0: f
- $s1: g
- $s2: h
- $s3: i
- $s4: j

<!--https://computer-science-student.tistory.com/366-->

```asm
add $t0, $s1, $s2 # temp t0 = g + h
add $t1, $s3, $s4 # temp t1 = i + j
sub $s0, $t0, $t1 # f = t0 - t1
```


### 2.3. Operands of the Computer Hardware

- registers: limited number of special locations built directly in hardware.
- <a id="r3" class="links" href="#w3" title="word: The natural unit of access in a computer, usually a group of 32 bits; corresponds to the size of a register in the MIPS architecture.">[3]</a><u>word</u>: Unit of access in a computer; corresponds to the size of a register in the MIPS architecture.
- MIPS has a 32 * 32-bit register file. => word: 32 bits

# HW Design Principle 2

| Smaller is faster. |

The reason for the limit of 32 registers:<br>
Large number of register => Increase clock cycle time<br>
∵ it takes longer electronic signals.

#### Memory Operands

- data transfer instruction: 
  - load: Copies data from memory to a register.
  - store: complementary dti to load: copies data from a register to a memory.
- address: 

offset, base register, ...

### 2.4. Signed & Unsigned Numbers
### 2.5. Representing Instructions in the Computer
### 2.6. Logical Operators
### 2.7. Instructions for Making Decisions
### 2.8. Supporting Procedures in Computer Hardware
### 2.9. Communicating with People
### 2.10 MIPS Addressing for 32-bit Immediates & Addresses
### 2.11 Parallelism and Instructions: Synchronization

Parallel excution is easier when tasks are independent, but often they need to cooperate.

Critical ability for synchronization:<br>
*Atomically* read and modify a memory location.
- i.e. **Nothing else can interpose** itself between the read and the write of the memory location.

Could be a single instruction
- e.g. **Atomic swap of register <-> memory**.
- Or an atomic pair of instructions.

ll, sc

- ll: load linked

ll reg, val(reg)

- sc: store conditional

sc reg, val(reg)

e.g. atomic swap

```Assembly
try: add $t0, $zero, $s4

()

```

### 2.12 Translating and Starting a Program

Assembler

- pseudoinstructions.

e.g.
- move
- blt

nyumnyum

### 2.14 Arrays versus Pointers

nyum nyum 2가지 비교 with the print.


### Word List

❗단어들❗

| link | 단어 | 뜻 |
| --- | --- | --- |
| <a id="w1" href="#r1">1</a> | instruction set | The vocabulary of commands understood by a given architecture |
| <a id="w2" href="#r2">2</a> | stored-program concept | The idea that instructions and data of many types can be stored in memory as numbers, leading to the stored program computer. |
| <a id="w3" href="#r3">3</a> | word | The natural unit of access in a computer, usually a group of 32 bits; corresponds to the size of a register in the MIPS architecture. |
| <a id="w4" href="#r4">4</a> | data transfer instruction | A command that moves
| --- | --- | --- |
| --- | data race | Two memory accesses from a data race if they are **from different threads** to **same location**, at least one is a write, and thy occur one after another. |
| --- | pseudoinstruction | A common variation of assembly languag instructions often treated as if it were an instruction in its own right. |
| --- |  | |
